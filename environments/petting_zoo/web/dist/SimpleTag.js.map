{
  "version": 3,
  "sources": ["../SimpleTag.jsx"],
  "sourcesContent": ["import { useCallback, useState } from \"react\";\nimport {\n  Button,\n  DPAD_BUTTONS,\n  useDPadPressedButtons,\n  createLookup,\n  FpsCounter,\n  KeyboardControlList,\n  serializePlayerAction,\n  Space,\n  TEACHER_ACTOR_CLASS,\n  TEACHER_NOOP_ACTION,\n  OBSERVER_ACTOR_CLASS,\n  useDocumentKeypressListener,\n  usePressedKeys,\n  useRealTimeUpdate,\n  SimplePlay,\n  PlayObserver,\n} from \"@cogment/cogment-verse\";\n\nconst ACTION_SPACE = new Space({\n  discrete: {\n    n: 5,\n  },\n});\n\nexport const SimpleTagControls = ({ sendAction, fps = 40, actorClass, observation, ...props }) => {\n\n  const hello = 1;\n  console.log(\"actorClass: \" + actorClass)\n\n  const [paused, setPaused] = useState(false);\n  const togglePause = useCallback(() => setPaused((paused) => !paused), [setPaused]);\n  useDocumentKeypressListener(\"p\", togglePause);\n\n  const pressedKeys = usePressedKeys();\n  const { pressedButtons, isButtonPressed, setPressedButtons } = useDPadPressedButtons();\n  const [activeButtons, setActiveButtons] = useState([]);\n\n  const computeAndSendAction = useCallback(\n    (dt) => {\n      if (pressedKeys.has(\"ArrowLeft\") || isButtonPressed(DPAD_BUTTONS.LEFT)) {\n        setActiveButtons([DPAD_BUTTONS.LEFT]);\n        sendAction(serializePlayerAction(ACTION_SPACE, 1));\n        return;\n      } else if (pressedKeys.has(\"ArrowRight\") || isButtonPressed(DPAD_BUTTONS.RIGHT)) {\n        setActiveButtons([DPAD_BUTTONS.RIGHT]);\n        sendAction(serializePlayerAction(ACTION_SPACE, 2));\n        return;\n      } else if (pressedKeys.has(\"ArrowDown\") || isButtonPressed(DPAD_BUTTONS.DOWN)) {\n        setActiveButtons([DPAD_BUTTONS.DOWN]);\n        sendAction(serializePlayerAction(ACTION_SPACE, 3));\n        return;\n      } else if (pressedKeys.has(\"ArrowUp\") || isButtonPressed(DPAD_BUTTONS.UP)) {\n        setActiveButtons([DPAD_BUTTONS.UP]);\n        sendAction(serializePlayerAction(ACTION_SPACE, 4));\n        return;\n      }\n      setActiveButtons([]);\n      sendAction(serializePlayerAction(ACTION_SPACE, 0));\n    },\n    [isButtonPressed, pressedKeys, sendAction, setActiveButtons, isTeacher]\n  );\n\n  const { currentFps } = useRealTimeUpdate(computeAndSendAction, fps, paused);\n\n  return (\n    <div {...props}>\n      <div className=\"flex flex-row p-5 justify-center\">\n        <DPad\n          pressedButtons={pressedButtons}\n          onPressedButtonsChange={setPressedButtons}\n          activeButtons={activeButtons}\n          disabled={paused}\n        />\n      </div>\n      <div className=\"flex flex-row gap-1\">\n        <Button className=\"flex-1\" onClick={togglePause}>\n          {paused ? \"Resume\" : \"Pause\"}\n        </Button>\n        <FpsCounter className=\"flex-none w-fit\" value={currentFps} />\n      </div>\n      <KeyboardControlList\n        items={[\n          [\"Left/Right/Up/Down Arrows\", \"Move left/right/up/down\"],\n          [\"p\", \"Pause/Unpause\"],\n        ]}\n      />\n    </div>\n  );\n};\n\n\nconst PlaySimpleTag = ({ actorParams, ...props }) => {\n  const actorClassName = actorParams?.className;\n  console.log(\"PlaySimpleTag | actorClassName: \" + actorClassName)\n\n\n  if (actorClassName === OBSERVER_ACTOR_CLASS) {\n    return <PlayObserver actorParams={actorParams} {...props} />;\n  }\n  return <SimplePlay actorParams={actorParams} {...props} controls={SimpleTagControls} />;\n};\n\nexport default PlaySimpleTag;\n"],
  "mappings": "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",
  "names": ["useCallback", "useState", "Button", "DPAD_BUTTONS", "useDPadPressedButtons", "FpsCounter", "KeyboardControlList", "serializePlayerAction", "Space", "OBSERVER_ACTOR_CLASS", "useDocumentKeypressListener", "usePressedKeys", "useRealTimeUpdate", "SimplePlay", "PlayObserver", "jsx", "jsxs", "ACTION_SPACE", "SimpleTagControls", "sendAction", "fps", "actorClass", "observation", "props", "paused", "setPaused", "togglePause", "pressedKeys", "pressedButtons", "isButtonPressed", "setPressedButtons", "activeButtons", "setActiveButtons", "computeAndSendAction", "dt", "currentFps", "PlaySimpleTag", "actorParams", "actorClassName", "SimpleTag_default"]
}
